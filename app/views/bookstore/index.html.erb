<html>
<head>
    <title>Bookstore</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>
 <body class="body">   
  <div class="main-container">
       <div class="search_wrapper">
          <div class = "form-data">
            <form>
                              <div class="inner-form">
                    <div class="input-field second-wrap">
                      <input id="search" type="text" placeholder="Search Books?" />
                    </div>
                    <div class="input-field third-wrap">
                      <button class="btn-search" type="button" id = "search_button">
                          <svg class="svg-inline--fa fa-search fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path>
                          </svg>
                      </button>
                    </div>
                </div>
              </form>
          </div>
      </div>
      <div class = "books_data">
          <% if @data.nil? %>
            <h1> Books Details</h1>
            <% @books.each do |book| %>
              <div class="row">
                  <div class = "col">
                      <h1><u><b><%=book.title %></b></u></h1>
                      <p><%= book.about %></p> 
                  </div>    
                  <div class = "col">
                      <p>Category: <%= book.category_name %></p>
                      <p>Release Date:</p>
                      <h2> <%= book.publication_date%></h2>
                  </div>
                  <div class = "col">
                      <p>Publishers Details:</p>
                      <% publication = Publication.find(book.publications_id) %>
                      <h2><%= publication.name %></h2>
                      <h5> Email: <%= publication.email %></h5>
                      <h5> Mobile: <%= publication.contact %></h5>
                      <p> Address: <%= publication.address %></p>
                  </div>
              </div>     
            <% end %>
          <% else %>
            <% if @data.empty? %>
                <h2> No Books Found </h2>
            <% else %>
              <h1> Books Details</h1>
              <% @data.each do |data| %>
              <div class="row">
                  <div class = "col">
                      <h1><u><b><%=data['title'] %></b></u></h1>
                      <p><%= data['about'] %></p>
                  </div>
                  <div class = "col">
                      <p>Category: <%= data['category_name'] %></p>
                      <p>Release Date:</p>
                      <h2> <%= data['publication_date']%></h2>
                  </div>
                  <div class = "col">
                      <p>Publishers Details:</p>
                      <% publication = Publication.find(data['publications_id']) %>
                      <h2><%= publication.name %></h2>
                      <h5> Email: <%= publication.email %></h5>
                      <h5> Mobile: <%= publication.contact %></h5>
                      <p> Address: <%= publication.address %></p>
                  </div>    
                  
              </div>     
            <% end %>
            <% end %>
          <% end %>
      </div>
    </div>
  </div>
</body>
</html>
